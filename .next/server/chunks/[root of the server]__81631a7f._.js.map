{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/kumar/OneDrive/Desktop/dropbox/src/lib/auth.js"],"sourcesContent":["import NextAuth from \"next-auth\";\r\nimport Google from \"next-auth/providers/google\";\r\n\r\nexport const { handlers, signIn, signOut, auth } = NextAuth({\r\n  providers: [\r\n    Google({\r\n      clientId: process.env.GOOGLE_CLIENT_ID,\r\n      clientSecret: process.env.GOOGLE_CLIENT_SECRET,\r\n    }),\r\n  ],\r\n});\r\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AACA;AAAA;;;AAEO,MAAM,EAAE,QAAQ,EAAE,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG,CAAA,GAAA,uJAAA,CAAA,UAAQ,AAAD,EAAE;IAC1D,WAAW;QACT,CAAA,GAAA,uJAAA,CAAA,UAAM,AAAD,EAAE;YACL,UAAU,QAAQ,GAAG,CAAC,gBAAgB;YACtC,cAAc,QAAQ,GAAG,CAAC,oBAAoB;QAChD;KACD;AACH","debugId":null}},
    {"offset": {"line": 144, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/kumar/OneDrive/Desktop/dropbox/src/app/api/get-user-files/route.js"],"sourcesContent":["import { S3Client, ListObjectsV2Command } from \"@aws-sdk/client-s3\";\r\nimport { auth } from \"@/lib/auth\";\r\n\r\nexport async function GET(req) {\r\n  try {\r\n    const session = await auth();\r\n    if (!session || !session.user) {\r\n      return Response.json({ error: \"Unauthorized\" }, { status: 401 });\r\n    }\r\n\r\n    const userId = session.user.id; // Assuming user ID is stored in session\r\n    const s3 = new S3Client({\r\n      region: process.env.AWS_REGION,\r\n      credentials: {\r\n        accessKeyId: process.env.AWS_ACCESS_KEY_ID,\r\n        secretAccessKey: process.env.AWS_SECRET_ACCESS_KEY,\r\n      },\r\n    });\r\n\r\n    const command = new ListObjectsV2Command({\r\n      Bucket: process.env.AWS_BUCKET_NAME,\r\n      Prefix: `uploads/${userId}/`, // Fetch only user files\r\n    });\r\n\r\n    const response = await s3.send(command);\r\n\r\n    const files =\r\n      response.Contents?.map((file) => ({\r\n        key: file.Key,\r\n        name: file.Key.split(\"/\").pop(), // Extract filename from S3 path\r\n      })) || [];\r\n\r\n    return Response.json({ files });\r\n  } catch (error) {\r\n    console.error(\"Error fetching user files:\", error);\r\n    return Response.json({ error: \"Failed to fetch files\" }, { status: 500 });\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;AAAA;AACA;;;AAEO,eAAe,IAAI,GAAG;IAC3B,IAAI;QACF,MAAM,UAAU,MAAM,CAAA,GAAA,oHAAA,CAAA,OAAI,AAAD;QACzB,IAAI,CAAC,WAAW,CAAC,QAAQ,IAAI,EAAE;YAC7B,OAAO,SAAS,IAAI,CAAC;gBAAE,OAAO;YAAe,GAAG;gBAAE,QAAQ;YAAI;QAChE;QAEA,MAAM,SAAS,QAAQ,IAAI,CAAC,EAAE,EAAE,wCAAwC;QACxE,MAAM,KAAK,IAAI,iJAAA,CAAA,WAAQ,CAAC;YACtB,QAAQ,QAAQ,GAAG,CAAC,UAAU;YAC9B,aAAa;gBACX,aAAa,QAAQ,GAAG,CAAC,iBAAiB;gBAC1C,iBAAiB,QAAQ,GAAG,CAAC,qBAAqB;YACpD;QACF;QAEA,MAAM,UAAU,IAAI,iJAAA,CAAA,uBAAoB,CAAC;YACvC,QAAQ,QAAQ,GAAG,CAAC,eAAe;YACnC,QAAQ,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;QAC9B;QAEA,MAAM,WAAW,MAAM,GAAG,IAAI,CAAC;QAE/B,MAAM,QACJ,SAAS,QAAQ,EAAE,IAAI,CAAC,OAAS,CAAC;gBAChC,KAAK,KAAK,GAAG;gBACb,MAAM,KAAK,GAAG,CAAC,KAAK,CAAC,KAAK,GAAG;YAC/B,CAAC,MAAM,EAAE;QAEX,OAAO,SAAS,IAAI,CAAC;YAAE;QAAM;IAC/B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,OAAO,SAAS,IAAI,CAAC;YAAE,OAAO;QAAwB,GAAG;YAAE,QAAQ;QAAI;IACzE;AACF","debugId":null}}]
}