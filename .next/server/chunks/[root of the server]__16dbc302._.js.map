{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 140, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/kumar/OneDrive/Desktop/dropbox/src/app/api/upload_url/route.js"],"sourcesContent":["import { S3Client, PutObjectCommand } from \"@aws-sdk/client-s3\";\r\nimport { getSignedUrl } from \"@aws-sdk/s3-request-presigner\";\r\n\r\nconst s3 = new S3Client({\r\n  region: process.env.AWS_REGION,\r\n  credentials: {\r\n    accessKeyId: process.env.AWS_ACCESS_KEY_ID,\r\n    secretAccessKey: process.env.AWS_SECRET_ACCESS_KEY,\r\n  },\r\n});\r\n\r\nexport default async function handler(req, res) {\r\n  if (req.method !== \"POST\") {\r\n    return res.status(405).json({ error: \"Method not allowed\" });\r\n  }\r\n\r\n  try {\r\n    const { fileName, fileType } = req.body;\r\n\r\n    if (!fileName || !fileType) {\r\n      return res.status(400).json({ error: \"Missing fileName or fileType\" });\r\n    }\r\n\r\n    const params = {\r\n      Bucket: process.env.AWS_BUCKET_NAME,\r\n      Key: `uploads/${fileName}`,\r\n      ContentType: fileType,\r\n    };\r\n\r\n    const uploadUrl = await getSignedUrl(s3, new PutObjectCommand(params), {\r\n      expiresIn: 60,\r\n    });\r\n\r\n    return res.status(200).json({ uploadUrl });\r\n  } catch (error) {\r\n    console.error(\"Upload URL Error:\", error);\r\n    return res\r\n      .status(500)\r\n      .json({ error: \"Failed to generate URL\", details: error.message });\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;AAAA;AACA;AAAA;;;AAEA,MAAM,KAAK,IAAI,iJAAA,CAAA,WAAQ,CAAC;IACtB,QAAQ,QAAQ,GAAG,CAAC,UAAU;IAC9B,aAAa;QACX,aAAa,QAAQ,GAAG,CAAC,iBAAiB;QAC1C,iBAAiB,QAAQ,GAAG,CAAC,qBAAqB;IACpD;AACF;AAEe,eAAe,QAAQ,GAAG,EAAE,GAAG;IAC5C,IAAI,IAAI,MAAM,KAAK,QAAQ;QACzB,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO;QAAqB;IAC5D;IAEA,IAAI;QACF,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,GAAG,IAAI,IAAI;QAEvC,IAAI,CAAC,YAAY,CAAC,UAAU;YAC1B,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;gBAAE,OAAO;YAA+B;QACtE;QAEA,MAAM,SAAS;YACb,QAAQ,QAAQ,GAAG,CAAC,eAAe;YACnC,KAAK,CAAC,QAAQ,EAAE,UAAU;YAC1B,aAAa;QACf;QAEA,MAAM,YAAY,MAAM,CAAA,GAAA,0LAAA,CAAA,eAAY,AAAD,EAAE,IAAI,IAAI,iJAAA,CAAA,mBAAgB,CAAC,SAAS;YACrE,WAAW;QACb;QAEA,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE;QAAU;IAC1C,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,qBAAqB;QACnC,OAAO,IACJ,MAAM,CAAC,KACP,IAAI,CAAC;YAAE,OAAO;YAA0B,SAAS,MAAM,OAAO;QAAC;IACpE;AACF","debugId":null}}]
}