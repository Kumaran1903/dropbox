{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/kumar/OneDrive/Desktop/dropbox/src/components/Dropbox/Dropbox.js"],"sourcesContent":["\"use client\"; // ✅ Required for Next.js App Router (ensures client-side execution)\r\n\r\nimport { useState, useCallback } from \"react\";\r\nimport { useDropzone } from \"react-dropzone\";\r\n\r\nexport default function Dropbox() {\r\n  const [uploading, setUploading] = useState(false);\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  // ✅ Handle file drop\r\n  const onDrop = useCallback(async (acceptedFiles) => {\r\n    if (acceptedFiles.length === 0) return;\r\n    setUploading(true);\r\n    setMessage(\"Uploading...\");\r\n\r\n    try {\r\n      const file = acceptedFiles[0];\r\n\r\n      // ✅ Step 1: Request a signed URL from the backend\r\n      const response = await fetch(\"/api/upload-url\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ fileName: file.name, fileType: file.type }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`Failed to get upload URL: ${response.statusText}`);\r\n      }\r\n\r\n      const { uploadUrl } = await response.json();\r\n\r\n      // ✅ Step 2: Upload the file to S3\r\n      const uploadResponse = await fetch(uploadUrl, {\r\n        method: \"PUT\",\r\n        body: file,\r\n        headers: { \"Content-Type\": file.type },\r\n      });\r\n\r\n      if (!uploadResponse.ok) {\r\n        throw new Error(`Upload failed: ${uploadResponse.statusText}`);\r\n      }\r\n\r\n      setMessage(\"✅ File uploaded successfully!\");\r\n    } catch (error) {\r\n      console.error(\"Upload Error:\", error);\r\n      setMessage(\"❌ Upload failed. Please try again.\");\r\n    } finally {\r\n      setUploading(false);\r\n    }\r\n  }, []);\r\n\r\n  const { getRootProps, getInputProps } = useDropzone({ onDrop });\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center justify-center min-h-screen bg-gray-100\">\r\n      <div\r\n        {...getRootProps()}\r\n        className=\"w-96 h-48 border-2 border-dashed border-gray-400 flex items-center justify-center bg-white rounded-lg cursor-pointer\"\r\n      >\r\n        <input {...getInputProps()} />\r\n        <p className=\"text-gray-700\">\r\n          Drag & drop files here, or click to select files\r\n        </p>\r\n      </div>\r\n\r\n      {uploading && <p className=\"mt-3 text-blue-500\">Uploading...</p>}\r\n      {message && <p className=\"mt-3 text-green-600\">{message}</p>}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAAA;;;AAHA,cAAc,oEAAoE;;;AAKnE,SAAS;;IACtB,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,qBAAqB;IACrB,MAAM,SAAS,CAAA,GAAA,6JAAA,CAAA,cAAW,AAAD;uCAAE,OAAO;YAChC,IAAI,cAAc,MAAM,KAAK,GAAG;YAChC,aAAa;YACb,WAAW;YAEX,IAAI;gBACF,MAAM,OAAO,aAAa,CAAC,EAAE;gBAE7B,kDAAkD;gBAClD,MAAM,WAAW,MAAM,MAAM,mBAAmB;oBAC9C,QAAQ;oBACR,SAAS;wBAAE,gBAAgB;oBAAmB;oBAC9C,MAAM,KAAK,SAAS,CAAC;wBAAE,UAAU,KAAK,IAAI;wBAAE,UAAU,KAAK,IAAI;oBAAC;gBAClE;gBAEA,IAAI,CAAC,SAAS,EAAE,EAAE;oBAChB,MAAM,IAAI,MAAM,CAAC,0BAA0B,EAAE,SAAS,UAAU,EAAE;gBACpE;gBAEA,MAAM,EAAE,SAAS,EAAE,GAAG,MAAM,SAAS,IAAI;gBAEzC,kCAAkC;gBAClC,MAAM,iBAAiB,MAAM,MAAM,WAAW;oBAC5C,QAAQ;oBACR,MAAM;oBACN,SAAS;wBAAE,gBAAgB,KAAK,IAAI;oBAAC;gBACvC;gBAEA,IAAI,CAAC,eAAe,EAAE,EAAE;oBACtB,MAAM,IAAI,MAAM,CAAC,eAAe,EAAE,eAAe,UAAU,EAAE;gBAC/D;gBAEA,WAAW;YACb,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,iBAAiB;gBAC/B,WAAW;YACb,SAAU;gBACR,aAAa;YACf;QACF;sCAAG,EAAE;IAEL,MAAM,EAAE,YAAY,EAAE,aAAa,EAAE,GAAG,CAAA,GAAA,2KAAA,CAAA,cAAW,AAAD,EAAE;QAAE;IAAO;IAE7D,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBACE,GAAG,cAAc;gBAClB,WAAU;;kCAEV,6LAAC;wBAAO,GAAG,eAAe;;;;;;kCAC1B,6LAAC;wBAAE,WAAU;kCAAgB;;;;;;;;;;;;YAK9B,2BAAa,6LAAC;gBAAE,WAAU;0BAAqB;;;;;;YAC/C,yBAAW,6LAAC;gBAAE,WAAU;0BAAuB;;;;;;;;;;;;AAGtD;GAhEwB;;QA8CkB,2KAAA,CAAA,cAAW;;;KA9C7B","debugId":null}}]
}